<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>ElectroTools — Интернет-магазин инструментов</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="styles.css">
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-storage-compat.js"></script>
</head>
<body>

<header>
  <div class="logo">
    <i class="fas fa-tools"></i>
    <h1>ElectroTools — магазин инструментов</h1>
  </div>
  <div class="header-controls">
    <div class="search-container">
      <i class="fas fa-search search-icon"></i>
      <input type="text" id="search" placeholder="Поиск...">
    </div>
    <select id="category">
      <option value="">Все категории</option>
    </select>
    <button onclick="toggleFavorites()" class="btn" id="favorites-btn">
      <i class="far fa-heart"></i>
    </button>
    <button onclick="toggleCompare()" class="btn" id="compare-btn">
      <i class="fas fa-balance-scale"></i>
      <span class="cart-count" id="compare-count">0</span>
    </button>
    <button id="login-btn" onclick="openLoginModal()" class="btn btn-login">
      <i class="fas fa-user"></i> Войти
    </button>
    <button onclick="loginAdmin()" class="btn btn-admin" id="admin-btn">
      <i class="fas fa-user-cog"></i> Админ
    </button>
    <button onclick="openCart()" class="btn btn-cart">
      <i class="fas fa-shopping-cart"></i>
      <span class="cart-count" id="cart-count">0</span>
    </button>
  </div>
</header>

<main>
  <aside class="filters">
    <h3>Фильтры</h3>
    <div class="filter-group">
      <label>Цена, ₴</label>
      <div class="price-range">
        <input type="number" id="price-min" placeholder="от" min="0">
        <span>-</span>
        <input type="number" id="price-max" placeholder="до" min="0">
      </div>
    </div>
    <div class="filter-group">
      <label>Рейтинг</label>
      <select id="rating-filter">
        <option value="">Любой рейтинг</option>
        <option value="4">4+ звезды</option>
        <option value="3">3+ звезды</option>
      </select>
    </div>
    <div class="filter-group">
      <label>Наличие</label>
      <div>
        <input type="checkbox" id="in-stock" checked>
        <label for="in-stock">В наличии</label>
      </div>
    </div>
    <div class="filter-group">
      <label>Сортировка</label>
      <select id="sort">
        <option value="default">По умолчанию</option>
        <option value="price-asc">Цена (по возрастанию)</option>
        <option value="price-desc">Цена (по убыванию)</option>
        <option value="name-asc">Название (А-Я)</option>
        <option value="name-desc">Название (Я-А)</option>
        <option value="rating-desc">По рейтингу</option>
      </select>
    </div>
    <div class="filter-buttons">
      <button onclick="applyFilters()" class="btn btn-detail">Применить</button>
      <button onclick="resetFilters()" class="btn">Сбросить</button>
    </div>
  </aside>

  <section>
    <div class="products-header">
      <h2 id="products-title">Все товары</h2>
      <div class="view-options">
        <span class="view-option active" onclick="changeView('grid')"><i class="fas fa-th"></i></span>
        <span class="view-option" onclick="changeView('list')"><i class="fas fa-list"></i></span>
      </div>
      <span id="products-count"></span>
      <select class="sort-select" id="sort-mobile">
        <option value="default">По умолчанию</option>
        <option value="price-asc">Цена (по возрастанию)</option>
        <option value="price-desc">Цена (по убыванию)</option>
        <option value="name-asc">Название (А-Я)</option>
        <option value="name-desc">Название (Я-А)</option>
        <option value="rating-desc">По рейтингу</option>
      </select>
    </div>
    <div id="product-grid" class="grid">
      <div class="loading">
        <i class="fas fa-spinner"></i>
        <h3>Загрузка товаров...</h3>
      </div>
    </div>
  </section>

  <aside>
    <h3>Недавно просмотренные</h3>
    <div id="recently-viewed"></div>
    
    <h3>О магазине</h3>
    <p>Каталог электроинструментов, наборов и автоключей и то что нужно для дома.</p>
    
    <div id="admin-panel" class="admin-panel" style="display:none;">
      <h4>Админ-панель</h4>
      <div class="tabs">
        <div class="tab active" onclick="switchTab('import-tab')">Импорт</div>
        <div class="tab" onclick="switchTab('products-tab')">Товары</div>
        <div class="tab" onclick="switchTab('orders-tab')">Заказы</div>
        <div class="tab" onclick="switchTab('reviews-tab')">Отзывы</div>
        <div class="tab" onclick="switchTab('images-tab')">Изображения</div>
      </div>
      
      <div id="import-tab" class="tab-content active">
        <div class="filter-group">
          <label>URL XML-фида:</label>
          <input type="text" id="feed-url" placeholder="https://api.dropshipping.ua/api/feeds/2091.xml">
          <button onclick="saveFeedUrl()" class="btn" style="margin-top: 10px;">Сохранить URL</button>
        </div>
        <button onclick="loadFromFeed()" class="btn btn-detail">Обновить из фида</button>
        <p id="feed-message" style="font-size:12px; color:#555; margin-top: 10px;"></p>
        <button onclick="clearCatalog()" class="btn">Очистить каталог</button>
        <button onclick="exportJSON()" class="btn">Экспорт JSON</button>
      </div>
      
      <div id="products-tab" class="tab-content">
        <div id="admin-products-list"></div>
      </div>
      
      <div id="orders-tab" class="tab-content">
        <div id="admin-orders-list"></div>
      </div>
      
      <div id="reviews-tab" class="tab-content">
        <div id="admin-reviews-list"></div>
      </div>
      
      <div id="images-tab" class="tab-content">
        <h4>Загрузка изображений</h4>
        <div class="form-group">
          <label>Выберите изображение:</label>
          <input type="file" id="imageInput" accept="image/*">
        </div>
        <button onclick="uploadImage()" class="btn btn-detail">Загрузить изображение</button>
        <div id="gallery" style="margin-top: 20px;"></div>
      </div>
      
      <button onclick="logoutAdmin()" class="btn" style="margin-top: 20px;">Выйти</button>
    </div>
  </aside>
</main>

<footer>
  © <span id="year"></span> ElectroTools 2025.
</footer>

<div id="modal" class="modal">
  <div class="modal-content" id="modal-content">
    <button class="modal-close" onclick="closeModal()"><i class="fas fa-times"></i></button>
  </div>
</div>

<div id="notification" class="notification">
  <i class="fas fa-check-circle"></i>
  <span id="notification-text"></span>
</div>

<div class="compare-container" id="compare-container">
  <div class="compare-items" id="compare-items"></div>
  <button onclick="openCompare()" class="btn btn-detail" id="compare-button">Сравнить</button>
</div>

<script src="script.js"></script>
</body>
</html>